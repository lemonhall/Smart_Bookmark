async function u(e){try{await e.actionOpenPopup();return}catch{}const t=await e.tabsQueryActive(),r=(t==null?void 0:t.url)??"",n=(t==null?void 0:t.title)??"",a=new URLSearchParams;r&&a.set("url",r),n&&a.set("title",n);const i=e.runtimeGetURL(`popup.html?${a.toString()}`);await e.tabsCreate(i)}function o(e){return new Promise(t=>e(t))}chrome.commands.onCommand.addListener(e=>{e==="open-smart-bookmark"&&u({actionOpenPopup:()=>chrome.action.openPopup(),tabsQueryActive:async()=>{const r=(await o(n=>chrome.tabs.query({active:!0,currentWindow:!0},n)))[0];return r?{url:r.url,title:r.title}:null},tabsCreate:t=>o(r=>chrome.tabs.create({url:t},()=>r(void 0))),runtimeGetURL:t=>chrome.runtime.getURL(t)})});
